"""
{{ project_name }} - Flask Application

Generated by REROUTE CLI
"""

from pathlib import Path
from flask import Flask
from reroute.adapters import FlaskAdapter
from config import AppConfig


# Create Flask app
app = Flask(__name__)

# Initialize REROUTE adapter (handles OpenAPI via Spectree automatically)
adapter = FlaskAdapter(
    flask_app=app,
    app_dir=Path(__file__).parent / "app",
    config=AppConfig
)

# Register all REROUTE routes
adapter.register_routes()


# Root endpoint
@adapter.get('/')
def root():
    """Welcome endpoint showing API information"""
    return {
        "message": "Welcome to {{ project_name }}",
        "docs": "/apidoc/swagger/",
        "framework": "REROUTE + Flask"
    }


# Health check endpoint
@adapter.get('/health')
def health():
    """Check if the API is running"""
    return {"status": "healthy"}


if __name__ == "__main__":
    # Run the REROUTE server
    adapter.run_server()
