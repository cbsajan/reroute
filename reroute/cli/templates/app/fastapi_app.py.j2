"""
{{ project_name }} - FastAPI Application

Generated by REROUTE CLI
"""

from pathlib import Path
from fastapi import FastAPI
from reroute.adapters import FastAPIAdapter
from reroute import run_server
# noinspection PyUnresolvedReferences
from config import AppConfig


# Create FastAPI app
app = FastAPI(
    title="{{ project_name }}",
    description="{{ description }}",
    version="0.1.0"
)

# Initialize REROUTE adapter
adapter = FastAPIAdapter(
    fastapi_app=app,
    app_dir=Path(__file__).parent / "app",
    config=AppConfig
)

# Register all REROUTE routes
adapter.register_routes()


# Root endpoint
@app.get("/")
def root():
    """Root endpoint"""
    return {
        "message": "Welcome to {{ project_name }}",
        "docs": "/docs",
        "framework": "REROUTE + FastAPI"
    }


# Health check endpoint
@app.get("/health")
def health():
    """Health check endpoint"""
    return {"status": "healthy"}


if __name__ == "__main__":
    # Run the REROUTE server
    run_server(
        "main:app",
        config=AppConfig,
        project_name="{{ project_name }}"
    )
